
// Xu following triggers     ///////////////////////////////////////////////////////////////////////////////

trigger start
lookingforxu,1
requirements
.null
effects
trigger end

trigger start
follow,0
requirements
	.null
effects
	character.followChar-Xu-Alton
	trigger.triggerStatus-lookingforxu-asleep
	trigger.triggerStatus-xuIsFollowing-on
	self.setStatus-awake
trigger end

trigger start
xuIsFollowing,0
requirements
	.null
effects
trigger end


trigger start
gwenStillUnlocked,0
requirements
	.null
effects
trigger end



// Introductory cinematic triggers   ///////////////////////////////////////////////////////////////////////////////


trigger start
chapterOnePrep,0
requirements
	character.isInMap-Ghost-Paulo's Room
effects
	character.pauseBehavior-Alton
	character.stopChar-Alton
	cinematic.moveChar-Alton-Basement Two-9,14
	trigger.triggerStatus-ChapterOneOn-awake
	trigger.triggerStatus-ChapterOneOn-on
	trigger.triggerStatus-BeforeChapterThree-on
	trigger.triggerStatus-ChapterTwoOn-asleep
	trigger.triggerStatus-ChapterThreeOn-asleep
	trigger.triggerStatus-ChapterFourOn-asleep
	self.setStatus-asleep
trigger end

trigger start
chapterOneCinematic,0
requirements
	player.isInMap-Basement Two
effects
	player.lockPlayer-true
	character.animate-Alton-Headphones
requirements
	self.timer-20
effects
	map.changeTransition-Paulo's Room-Basement Two-on
	dialogue.changeDialogueRoot-Ghost<hyphen>Paulo-root2
	player.cameraLock-true
	player.cameraPanRelative-1-72,0
	cinematic.walkChar-Marcurio-Basement Two-12,15
requirements
	self.timer-90
effects
	character.animate-Alton-Right Idle
requirements
	self.timer-30
effects
	character.animate-Marcurio-Left Idle
	gui.startDialogue-AltonMarcurioIntro-root
requirements
	gui.outOfDialogue
effects
	character.setBehavior-MarcurioKitchen
	character.unanimate-Alton
	character.unanimate-Marcurio
requirements
	self.timer-60
effects
	gui.startDialogue-AltonIntroTwo-root
requirements
	gui.outOfDialogue
	self.timer-30
effects
	cinematic.walkChar-Alton-Basement One-13,12
requirements
	self.timer-60
effects
	character.setBehavior-AltonIndecisive
	player.cameraPanRelative-3-<neg>72,0
	player.cameraLock-false
	player.lockPlayer-false
	trigger.triggerStatus-tutorial6trigger-awake
	
	dialogue.changeDialogueRoot-Cat<hyphen>Paulo-root2
	
	self.setStatus-asleep
trigger end


trigger start
tutorial6trigger,-1
requirements
	self.timer-30
effects
	cinematic.fadeInProp-Basement One-Tutorial8-<dot>01
requirements
	player.isCharacter-Alton
effects
	cinematic.removeProp-Basement One-Tutorial8
	self.setStatus-asleep
trigger end



// Alton + Xu Cinematic triggers     ///////////////////////////////////////////////////////////////////////////////



trigger start
AltonXuCinematic,0
requirements
	character.isInMap-Alton-Sue's Room
effects
	player.lockPlayer-true
	player.cameraLock-true
requirements
	self.timer-10
effects
	character.animate-Xu-Front Idle
requirements
	self.timer-30
effects
	gui.startDialogue-AltonXuCinematic-root
	trigger.triggerStatus-AltonXuCinematic2-awake
	self.setStatus-asleep
trigger end

trigger start
AltonXuCinematic2,-1
requirements
	gui.outOfDialogue
	self.timer-3
effects
	cinematic.walkChar-Alton-Sue's Room-6,6
requirements
	self.timer-30
effects
	character.animate-Alton-Right Idle
	character.animate-Xu-Left Idle
requirements
	self.timer-10
effects
	gui.startDialogue-AltonXuCinematic2-root
requirements
	gui.outOfDialogue
effects
	character.unanimate-Alton
	cinematic.walkChar-Alton-Sue's Room-6,8
requirements
	self.timer-20
effects
	character.stopChar-Alton
	character.animate-Xu-Front Idle
	gui.startDialogue-AltonXuCinematic2-altonWait
requirements
	gui.outOfDialogue
effects
	gui.startDialogue-AltonXuCinematic2-root<hyphen>3
	sound.fadeOutAllSounds-<dot>01
	sound.fadeInSound-Track6-1-<dot>01
requirements
	self.timer-10
effects
	character.animate-Alton-Back Idle
requirements
	gui.outOfDialogue
effects
	character.unanimate-Alton
	character.unanimate-Xu
	player.cameraLock-false
	player.lockPlayer-false
	sound.fadeOutAllSounds-<dot>01
requirements
	character.isInMap-Alton-Basement One
effects
	player.lockPlayer-true
requirements
	self.timer-20
effects
	player.cameraLock-true
	player.cameraPanRelative-3-192,<neg>192
	gui.startDialogue-AltonXuCinematic2-root<hyphen>10
requirements
	self.timer-60
	gui.outOfDialogue
effects
	player.cameraPanRelative-3-<neg>192,192
requirements
	self.timer-65
effects
	player.cameraLock-false
	player.lockPlayer-false
	self.setStatus-asleep
trigger end




// Alton + Xu Dialogue triggers  ///////////////////////////////////////////////////////////////////////////////


trigger start
altonOne,1
requirements
	.null
effects
trigger end

trigger start
altonTwo,1
requirements
	.null
effects
trigger end

trigger start
altonThree,0
requirements
	.null
effects
	trigger.triggerStatus-altonOne-asleep
trigger end

trigger start
altonFour,0
requirements
	.null
effects
	trigger.triggerStatus-altonTwo-asleep
trigger end

trigger start
altonBoth,0
requirements
	trigger.triggerIsStatus-altonThree-on
	trigger.triggerIsStatus-altonFour-on
effects
	trigger.triggerStatus-altonThree-asleep
	trigger.triggerStatus-altonFour-asleep
trigger end



// Alton + Xu Detective dialogue triggers ///////////////////////////////////////////////////////////////////////////////



trigger start
altonXuDialogues,0
requirements
	trigger.triggerIsStatus-xuIsFollowing-on
effects
	dialogue.changeDialogueRoot-Alton<hyphen>Marcurio-xuIsFollowing
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-xuIsFollowing
	self.setStatus-asleep
trigger end

trigger start
altonXuTalkedtoDonovan,0
requirements
	.null
effects
trigger end

trigger start
altonXuTalkedtoGwen,0
requirements
	.null
effects
trigger end

trigger start
altonXuTalkedtoGarv,0
requirements
	.null
effects
	trigger.triggerStatus-chap1GwenPath-on
trigger end

trigger start
chap1GwenPath,0
requirements
	.null
effects
	character.setBehavior-GwenDefault
	self.setStatus-asleep
trigger end

trigger start
altonXuTalkedtoDarryl,0
requirements
	.null
effects
	trigger.triggerStatus-chap1GarvPath-on
trigger end

trigger start
chap1GarvPath,0
requirements
	.null
effects
	character.setBehavior-GarvLounging
	self.setStatus-asleep
trigger end
	
trigger start
altonXuTalkedtoQuella,0
requirements
	.null
effects
	trigger.triggerStatus-chap1DonovanPath-on
trigger end

trigger start
chap1DonovanPath,0
requirements
	.null
effects
	character.setBehavior-DonovanDefault
	self.setStatus-asleep
trigger end

trigger start
altonXuTalkedtoFerdinand,0
requirements
	.null
effects
trigger end

trigger start
chap1FerdinandPath,0
requirements
	trigger.triggerIsStatus-altonXuTalkedtoFerdinand-on
	gui.outOfDialogue
effects
	character.setBehavior-FerdinandRoute
	self.setStatus-asleep
trigger end

trigger start
altonXuTalkedtoMarcurio,0
requirements
	.null
effects
	trigger.triggerStatus-chap1QuellaPath-on
trigger end

trigger start
chap1QuellaPath,0
requirements
	.null
effects
	character.setBehavior-QuellaOutside
	self.setStatus-asleep
trigger end

trigger start
altonXuHintTime,0
requirements
	trigger.triggerIsStatus-altonXuTalkedtoDonovan-on
	trigger.triggerIsStatus-altonXuTalkedtoGwen-on
	trigger.triggerIsStatus-altonXuTalkedtoGarv-on
	trigger.triggerIsStatus-altonXuTalkedtoDarryl-on
	trigger.triggerIsStatus-altonXuTalkedtoQuella-on
	trigger.triggerIsStatus-altonXuTalkedtoFerdinand-on
	trigger.triggerIsStatus-altonXuTalkedtoMarcurio-on
	gui.outOfDialogue
effects
	player.lockPlayer-true
requirements
	self.timer-30
effects
	gui.startDialogue-AltonXuHint-root
	player.lockPlayer-false
	self.setStatus-asleep
trigger end




// Alton + Xu Resolution cinematic / triggers  ///////////////////////////////////////////////////////////////////////////////


trigger start
altonXuResolution,0
requirements
	trigger.triggerIsStatus-altonXuTalkedtoDonovan-on
	trigger.triggerIsStatus-altonXuTalkedtoGwen-on
	trigger.triggerIsStatus-altonXuTalkedtoGarv-on
	trigger.triggerIsStatus-altonXuTalkedtoDarryl-on
	trigger.triggerIsStatus-altonXuTalkedtoQuella-on
	trigger.triggerIsStatus-altonXuTalkedtoFerdinand-on
	trigger.triggerIsStatus-altonXuTalkedtoMarcurio-on
	character.isInMap-Alton-Sue's Room
effects
	character.setBehavior-QuellaInRoomPacing
	
	player.lockPlayer-true
	cinematic.moveChar-XuFollower-Sue's Room-6,6
	character.unfollowChar-Xu
	cinematic.walkChar-Xu-Sue's Room-5,7
requirements
	self.timer-30
effects
	character.animate-Xu-Right Idle
	cinematic.walkChar-Alton-Sue's Room-7,7
requirements
	self.timer-40
effects
	character.animate-Alton-Left Idle
	gui.startDialogue-AltonXuResolution-root
requirements
	gui.outOfDialogue
effects
	character.animate-Alton-Sneeze
	gui.startDialogue-AltonXuResolution-root<hyphen>fail4
requirements
	gui.outOfDialogue
effects
	character.unanimate-Alton
	cinematic.walkChar-Alton-Sue's Room-8,6
requirements
	self.timer-20
effects
	character.animate-Alton-Back Idle
	gui.startDialogue-AltonXuResolution-root<hyphen>fail5
requirements
	gui.outOfDialogue
effects
	character.animate-Alton-Left Idle
	gui.startDialogue-AltonXuResolution-root<hyphen>fail6
	sound.fadeOutAllSounds-<dot>01
	sound.fadeInSound-Track6-1-<dot>01
requirements
	gui.outOfDialogue
effects
	character.animate-Alton-SneezeAnticipation
	gui.startDialogue-AltonXuResolution-anticipation1
requirements
	gui.outOfDialogue
effects
	gui.startDialogue-AltonXuResolution-anticipation2
requirements
	gui.outOfDialogue
effects
	character.animate-Alton-SneezeAnticipation
	gui.startDialogue-AltonXuResolution-anticipation3
requirements
	gui.outOfDialogue
effects
	gui.startDialogue-AltonXuResolution-anticipation4
requirements
	gui.outOfDialogue
effects
	character.animate-Alton-Sneeze
	cinematic.addProp-Sue's Room-XusLootFall
	cinematic.removeProp-Sue's Room-XusLoot
	sound.fadeOutAllSounds-1
	gui.startDialogue-AltonXuResolution-anticipation5
requirements
	gui.outOfDialogue
	self.timer-30
effects
	character.animate-Alton-Left Idle
	gui.startDialogue-AltonXuResolution-theReveal
	cinematic.removeProp-Sue's Room-XusLootFall
	cinematic.addProp-Sue's Room-XusLootDown
requirements
	gui.outOfDialogue
effects
	player.depossess
	character.setPossessable-Alton-0
	character.setPossessable-Xu-1
	character.unanimate-Alton
	character.setBehavior-AltonSulking
	trigger.triggerStatus-xuIsFollowing-asleep
	trigger.triggerStatus-gwenStillUnlocked-on
requirements
	self.timer-45
effects
	character.unanimate-Xu
	gui.startDialogue-AltonXuResolution-finale
requirements
	gui.outOfDialogue
	self.timer-30
effects
	character.drawCharGhostEffect-Xu
	cinematic.activateAchievement-CHAPTER_ONE
requirements
	self.timer-160
effects
	character.removeCharGhostEffect-Xu
	character.setBehavior-XuChap2Quella
	player.cameraLock-false
	dialogue.changeDialogueRoot-Alton<hyphen>Marcurio-root
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-root
	dialogue.changeDialogueRoot-Cat<hyphen>Alton-root2
	
	sound.fadeInSound-Track1-1-<dot>01
	trigger.triggerStatus-messageFromPaulo-awake
	self.setStatus-asleep
trigger end


trigger start
messageFromPaulo,-1
requirements
	self.timer-30
	gui.outOfDialogue
effects
	gui.startDialogue-PaulosMessageTwo-root-true
	dialogue.changeDialogueRoot-Ghost<hyphen>Paulo-shipDirection
	cinematic.moveChar-Cat-Vent Shaft-1,3
	player.lockPlayer-false
	trigger.triggerStatus-messageFromPauloTheme-awake
	self.setStatus-asleep
trigger end

trigger start
messageFromPauloTheme,-1
requirements
	player.isInMap-Basement One
effects
	sound.fadeOutSound-Track1-<dot>01
	self.setStatus-asleep
trigger end

trigger start
chap2PauloNewsFinished,0
requirements
	trigger.triggerIsStatus-chap2PauloGood-on
	trigger.triggerIsStatus-chap2PauloBad-on
effects
	trigger.triggerStatus-chap2PauloGood-asleep
	trigger.triggerStatus-chap2PauloBad-on
trigger end

trigger start
shipDirectionExplained,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Ghost<hyphen>Paulo-root2
	cinematic.moveChar-Cat-Vent Shaft-1,3
	cinematic.walkChar-Cat-Paulo's Room-9,6
	cinematic.fadeInProp-Paulo's Room-Tutorial6-0<dot>005
	
	spectral.changeMindReadThoughts-Cat-Cat2
	spectral.changeMindReadThoughts-Paulo-Paulo2
	spectral.changeMindReadThoughts-Alton-Alton2
	spectral.changeMindReadThoughts-Xu-Xu2
	spectral.changeMindReadThoughts-Marcurio-Marcurio2
	spectral.changeMindReadThoughts-Ferdinand-Ferdinand2
	spectral.changeMindReadThoughts-Quella-Quella2
	spectral.changeMindReadThoughts-Darryl-Darryl2
	spectral.changeMindReadThoughts-Donovan-Donovan2
	spectral.changeMindReadThoughts-Gwen-Gwen2
	spectral.changeMindReadThoughts-Garv-Garv2
	
	trigger.triggerStatus-ChapterTwoOn-awake
	trigger.triggerStatus-ChapterTwoOn-on
	
	trigger.triggerStatus-removeAbilityTutorial-awake
	trigger.triggerStatus-chap2PauloNewsFinished-asleep
	self.setStatus-asleep
trigger end

trigger start
removeAbilityTutorial,-1
requirements
	character.isInMap-Ghost-Basement Two
effects
	cinematic.removeProp-Paulo's Room-Tutorial6
	self.setStatus-asleep
trigger end



