

// CHAPTER 2 CINEMATIC SCRIPTING

trigger start
gwenToFerdinand,0
requirements
	.null
effects
trigger end

trigger start
gwenMasterKey,0
requirements
	.null
effects
trigger end

trigger start
chap2catTime,0
requirements
	.null
effects
trigger end

trigger start
unlockQuella,0
requirements
	.null
effects
	character.setPossessable-Quella-1
	trigger.triggerStatus-QuellaSpectralAnimation-awake
	self.setStatus-asleep
trigger end

trigger start
QuellaSpectralAnimation,-1
requirements
	gui.outOfDialogue
effects
	player.cameraLock-true
	player.lockPlayer-true
	character.drawCharGhostEffect-Quella
requirements
	self.timer-150
effects
	character.removeCharGhostEffect-Quella
	player.cameraLock-false
	player.lockPlayer-false
	character.setBehavior-XuPacingDiningRoom
	self.setStatus-asleep
trigger end

trigger start
chap2greetGwen,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Quella<hyphen>Gwen-root<hyphen>greetedGwen
	self.setStatus-asleep
trigger end

trigger start
chap2everythingsFine,0
requirements
	.null
effects
trigger end

trigger start
chap2everythingsNotFine,0
requirements
	.null
effects
trigger end

trigger start
unlockGwen,0
requirements
	.null
effects
	character.setPossessable-Gwen-1
	trigger.triggerStatus-gwenSpectralAnimation-awake
	trigger.triggerStatus-chap2everythingsFine-asleep
	trigger.triggerStatus-chap2everythingsNotFine-on
	dialogue.changeDialogueRoot-Cat<hyphen>Gwen-root2
	self.setStatus-asleep
trigger end

trigger start
gwenSpectralAnimation,-1
requirements
	gui.outOfDialogue
effects
	player.cameraLock-true
	player.lockPlayer-true
	cinematic.panCameraToCharacter-Gwen-3
	character.drawCharGhostEffect-Gwen
requirements
	self.timer-150
effects
	character.setBehavior-FerdinandLounging
	character.removeCharGhostEffect-Gwen
	player.cameraLock-false
	player.lockPlayer-false
	player.panToPlayer-3
	self.setStatus-asleep
trigger end

trigger start
chap2altonDenial,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-root
	trigger.triggerStatus-altonSpectralAnimation-awake
	character.setPossessable-Alton-1
	
	self.setStatus-asleep
trigger end

trigger start
altonSpectralAnimation,-1
requirements
	gui.outOfDialogue
effects
	player.cameraLock-true
	player.lockPlayer-true
	character.drawCharGhostEffect-Alton
requirements
	self.timer-150
effects
	character.removeCharGhostEffect-Alton
	player.cameraLock-false
	player.lockPlayer-false
	self.setStatus-asleep
trigger end


trigger start
chap2altonSad,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Quella<hyphen>Alton-root2
	dialogue.changeDialogueRoot-Xu<hyphen>Alton-root2
	dialogue.changeDialogueRoot-Alton<hyphen>Xu-root2
	character.setBehavior-AltonUpset
	self.setStatus-asleep
trigger end


trigger start
chap2fullPossess,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-root
	dialogue.changeDialogueRoot-Quella<hyphen>Alton-chap2Final
	trigger.triggerStatus-donovanLured-awake
	trigger.triggerStatus-altonSpectralAnimation2-awake
	character.setPossessable-Alton-2
	character.eraseBehavior-Donovan
	character.setBehavior-DonovanInRoom
	character.setBehavior-FerdinandCaptain
	
	self.setStatus-asleep
trigger end

trigger start
altonSpectralAnimation2,-1
requirements
	gui.outOfDialogue
effects
	player.cameraLock-true
	player.lockPlayer-true
	character.drawCharGhostEffect-Alton
requirements
	self.timer-150
effects
	character.removeCharGhostEffect-Alton
	character.setBehavior-AltonAtNight
	trigger.triggerStatus-altonTutorialPropInit-awake
	player.cameraLock-false
	player.lockPlayer-false
	
	cinematic.activateAchievement-ALTON_FULL
	self.setStatus-asleep
trigger end

trigger start
altonTutorialPropInit,-1
requirements
	character.isInMap-Alton-Alton's Room
effects
	cinematic.fadeInPropOnChar-Alton-Tutorial7-0<dot>005
	trigger.triggerStatus-altonTutorialProp-awake
	self.setStatus-asleep
trigger end
	
trigger start
altonTutorialProp,-1
requirements
	player.isFullyPossessedCharacter-Alton
effects
	cinematic.removePropFromChar-Alton-Tutorial7
	self.setStatus-asleep
trigger end


// Ferdinand's intercom cinematic / triggers  ///////////////////////////////////////////////////////////////////////////////

trigger start
ferdinandCutScene,0
requirements
	player.isCharacter-Quella
	character.isInMap-Quella-Basement Two
effects
	player.lockPlayer-true
	cinematic.moveChar-Gwen-Basement Two-18,7
	cinematic.moveChar-Donovan-Basement Two-9,4
	cinematic.moveChar-Cat-Garv's Room-5,8
	cinematic.moveChar-Garv-Basement Two-13,5
	
	character.eraseBehavior-Gwen
	character.stopChar-Gwen
requirements
	self.timer-20
effects
	trigger.triggerStatus-AnimateIntercom-on
	gui.startDialogue-FerdinandIntroSkit-root
	sound.fadeOutAllSounds-<dot>01
	sound.fadeInSound-Track2-1-<dot>01
	player.cameraLock-true
requirements
	gui.outOfDialogue
effects
	trigger.triggerStatus-UnanimateIntercom-on
	sound.fadeOutAllSounds-<dot>01
	cinematic.panCameraToCharacter-Gwen-3
requirements
	self.timer-40
effects
	gui.startDialogue-FerdinandIntroSkit2-root
requirements
	gui.outOfDialogue
effects
	player.cameraPan-3-676,416
	sound.fadeInSound-Track14-1-<dot>01
requirements
	self.timer-40
effects
	player.lockPlayer-false
	player.cameraLock-false
	
	character.setBehavior-GwenDefault
	trigger.triggerStatus-ChapterOneOn-asleep
	trigger.triggerStatus-ChapterThreeOn-asleep
	trigger.triggerStatus-ChapterFourOn-asleep
	
	trigger.triggerStatus-gwenStillUnlocked-asleep
	trigger.triggerStatus-gwenToFerdinand-on
	
	self.setStatus-asleep
trigger end



// Gwen's investigation on Donovan cinematics / triggers  ///////////////////////////////////////////////////////////////////////////////

trigger start
gwensSearchOn,0
requirements
	.null
effects
	prop.changePropDialogue-DonovansDoor-Gwen-DonovanDoorFailGwen-false
	prop.changePropDialogue-DonovansDoor-GhostAlton-DonovanDoorFailAlton-false
	dialogue.changeDialogueRoot-Gwen<hyphen>Ferdinand-root2
	dialogue.changeDialogueRoot-DonovanDoorFailGwen-root2
	dialogue.changeDialogueRoot-DonovanDoorFailAlton-root2
	dialogue.changeDialogueRoot-DonovanDoorFailAll-root2
	character.eraseBehavior-Donovan
	character.setBehavior-FerdinandRoute
	character.setBehavior-QuellaOutside2
	character.setBehavior-GarvInRoom
	cinematic.walkChar-Donovan-Donovan's Room-6,6
	trigger.triggerStatus-gwenToFerdinand-asleep
	trigger.triggerStatus-gwenMasterKey-on
	trigger.triggerStatus-gwenIsNosy-awake
	player.lockPlayer-true
	self.setStatus-asleep
trigger end

trigger start
gwenIsNosy,-1
requirements
	self.timer-30
effects
	gui.startDialogue-GwenIsNosy-root
	player.lockPlayer-false
requirements
	gui.outOfDialogue
	self.timer-60
effects
	self.setStatus-asleep
trigger end




trigger start
gwenFindsKey,-1
requirements
	gui.inSpecificDialogue-SkeletonKeyGwen
effects
	dialogue.changeDialogueRoot-Gwen<hyphen>Ferdinand-afterSearch
	character.setBehavior-XuAtNight
	self.setStatus-asleep
trigger end



// Cat's breaking into Donovan's room      ///////////////////////////////////////////////////////////////////////////////

trigger start
lockGwensDoor,0
requirements
	character.isInMap-Cat-Gwen's Room
effects
	map.changeTransition-Gwen's Room-Basement Two-off
	trigger.triggerStatus-unlockGwensDoor-awake
	self.setStatus-asleep
trigger end

trigger start
unlockGwensDoor,-1
requirements
	character.isInMap-Cat-Vent Shaft North
effects
	map.changeTransition-Gwen's Room-Basement Two-on
	trigger.triggerStatus-lockGwensDoor-awake
	self.setStatus-asleep
trigger end






trigger start
lockDonovansDoor,-1
requirements
	character.isInMap-Cat-Donovan's Room
effects
	map.changeTransition-Donovan's Room-Basement Two-off
	trigger.triggerStatus-unlockDonovansDoor-awake
	trigger.triggerStatus-reunlockDonovansDoor-awake
	self.setStatus-asleep
trigger end


trigger start
unlockDonovansDoor,-1
requirements
	character.isOnTile-Cat-Donovan's Room-5,9
effects
	gui.startDialogue-CatUnlockDoor-root
	trigger.triggerStatus-donovansRoomEmpty-awake
	self.setStatus-asleep
trigger end

trigger start
reunlockDonovansDoor,-1
requirements
	character.isInMap-Cat-Vent Shaft North
effects
	map.changeTransition-Donovan's Room-Basement Two-on
	trigger.triggerStatus-lockDonovansDoor-awake
	self.setStatus-asleep
trigger end



trigger start
lockDonovansDoor2,0
requirements
	character.isInMap-Cat-Donovan's Room
effects
	map.changeTransition-Donovan's Room-Basement Two-off
	trigger.triggerStatus-unlockDonovansDoor2-awake
	trigger.triggerStatus-reunlockDonovansDoor2-awake
	self.setStatus-asleep
trigger end
	
trigger start
unlockDonovansDoor2,-1
requirements
	character.isOnTile-Cat-Donovan's Room-5,9
effects
	gui.startDialogue-CatUnlockDoor-root2
requirements
	gui.outOfDialogue
	character.isPastPoint-Cat-Donovan's Room-Up-240
effects
	self.setStatus-awake
trigger end

trigger start
reunlockDonovansDoor2,-1
requirements
	character.isInMap-Cat-Vent Shaft North
effects
	map.changeTransition-Donovan's Room-Basement Two-on
	trigger.triggerStatus-lockDonovansDoor2-awake
	self.setStatus-asleep
trigger end



trigger start
donovansDoorUnlocked,0
requirements
	.null
effects
	map.changeTransition-Donovan's Room-Basement Two-on
	prop.changeAllPermission-DonovansDoor-true
	prop.changePermission-DonovansDoor-Gwen-false
	trigger.triggerStatus-resetDonovansDoor-asleep
	trigger.triggerStatus-unlockDonovansDoor-asleep
	trigger.triggerStatus-unlockDonovansDoor2-asleep
	trigger.triggerStatus-lockDonovansDoor-asleep
	trigger.triggerStatus-lockDonovansDoor2-asleep
	trigger.triggerStatus-reunlockDonovansDoor2-asleep
	trigger.triggerStatus-reunlockDonovansDoor-asleep
	trigger.triggerStatus-gwenFindsKey-awake
	self.setStatus-asleep
trigger end




// Alton luring Donovan out triggers ////////////////////////////////////////////////////////////


trigger start
altonLuredDonovan,0
requirements
	.null
effects
trigger end

trigger start
donovanLured,-1
requirements
	gui.outOfDialogue
	trigger.triggerIsStatus-altonLuredDonovan-on
effects
	character.setBehavior-DonovanOutside
	dialogue.changeDialogueRoot-Alton<hyphen>Donovan-root2
	dialogue.changeDialogueRoot-GhostAlton<hyphen>Donovan-root2
	dialogue.changeDialogueRoot-DonovanDoorFailAlton-root
	dialogue.changeDialogueRoot-DonovanDoorFailGwen-root
	
	trigger.triggerStatus-lockDonovansDoor2-asleep
	trigger.triggerStatus-unlockDonovansDoor2-asleep
	trigger.triggerStatus-reunlockDonovansDoor2-asleep
	trigger.triggerStatus-donovanOutside-awake
	trigger.triggerStatus-lockDonovansDoor-awake
	trigger.triggerStatus-chap2catTime-on
	trigger.triggerStatus-gwenMasterKey-asleep
	
	trigger.triggerStatus-altonLuredDonovan-asleep
	self.setStatus-asleep
trigger end

trigger start
donovanOutside,-1
requirements
	character.isInMap-Donovan-Boat
effects
	dialogue.changeDialogueRoot-Alton<hyphen>Donovan-root3
	dialogue.changeDialogueRoot-GhostAlton<hyphen>Donovan-root3
	character.setBehavior-DarrylAtNight
	character.setBehavior-QuellaInRoomPacing
	trigger.triggerStatus-chap2DarrylInside-awake
	self.setStatus-asleep
trigger end


trigger start
chap2DarrylInside,-1
requirements
	character.isInMap-Darryl-Darryl's Room
effects
	prop.changeAllPermission-DarrylsDoor-false
	prop.changePermission-DarrylsDoor-Darryl-true
	self.setStatus-asleep
trigger end


trigger start
donovansRoomEmpty,-1
requirements
	character.notInMap-Donovan-Donovan's Room
effects
	prop.changePermission-DonovansDoor-Gwen-false
	self.setStatus-asleep
trigger end

trigger start
chap2altonDonProgress,0
requirements
	trigger.triggerIsStatus-ferdinandUnlocked-on
effects
	dialogue.changeDialogueRoot-Alton<hyphen>Donovan-root4
	self.setStatus-asleep
trigger end



trigger start
chapterTwoClose,0
requirements
	.null
effects	
	trigger.triggerStatus-ferdinandSpectralAnimation-awake
	trigger.triggerStatus-ferdinandUnlocked-on
	trigger.triggerStatus-chap2catTime-asleep
	character.pauseBehavior-Ferdinand
	self.setStatus-asleep
trigger end

trigger start
ferdinandSpectralAnimation,-1
requirements
	gui.outOfDialogue
effects
	sound.fadeOutAllSounds-<dot>01
	sound.fadeInSound-Track6-1-<dot>01
	gui.startDialogue-Gwen<hyphen>Ferdinand-afterSearch2
requirements
	gui.outOfDialogue
effects
	character.setPossessable-Ferdinand-1
	dialogue.changeDialogueRoot-Gwen<hyphen>Ferdinand-afterChapTwo
	dialogue.changeDialogueRoot-Alton<hyphen>Donovan-root
	dialogue.changeDialogueRoot-GhostAlton<hyphen>Donovan-afterChapTwo
	
	character.setBehavior-DonovanInRoom
	character.setBehavior-GwenAtNight
	prop.changeAllPermission-DonovansDoor-false
	prop.changePermission-DonovansDoor-Donovan-true
	map.changeTransition-Donovan's Room-Basement Two-on
	
	cinematic.removeProp-Boat-BoatSunset
	cinematic.addParallaxProp-Boat-BoatSundown
	cinematic.addStaticProp-Boat-BoatSundownWater
	cinematic.removeProp-Observation Room-WindowSunset
	cinematic.addProp-Observation Room-WindowSundown
	player.cameraLock-true
	player.lockPlayer-true
	cinematic.panCameraToCharacter-Ferdinand-3
	character.drawCharGhostEffect-Ferdinand
requirements
	self.timer-150
effects
	character.removeCharGhostEffect-Ferdinand
	character.resumeBehavior-Ferdinand
	sound.fadeOutAllSounds-<dot>01
	
	player.cameraLock-false
	player.lockPlayer-false
	player.panToPlayer-3
	
	trigger.triggerStatus-achievementSwitch1-awake
	trigger.triggerStatus-achievementSwitch2-awake
	trigger.triggerStatus-achievementSwitch3-awake
	trigger.triggerStatus-achievementSwitch4-awake
	trigger.triggerStatus-achievementSwitch5-awake
	trigger.triggerStatus-achievementSwitch6-awake
	self.setStatus-asleep
trigger end


trigger start
ferdinandUnlocked,0
requirements
	.null
effects
trigger end


trigger start
shipDirectionChanged,0
requirements
	.null
effects
	trigger.triggerStatus-initInterlude-awake
	character.setBehavior-QuellaAtNight
	trigger.triggerStatus-ferdinandUnlocked-asleep
	dialogue.changeDialogueRoot-PilothouseWheelFerdinand-root2
	player.lockPlayer-true
	
	cinematic.activateAchievement-CHAPTER_TWO
	self.setStatus-asleep
trigger end

trigger start
initInterlude,-1
requirements
	gui.outOfDialogue
effects
	dialogue.changeDialogueRoot-Ghost<hyphen>Paulo-interlude
requirements
	self.timer-80
effects
	gui.startDialogue-PaulosMessageThree-root-true
	player.lockPlayer-false
	self.setStatus-asleep
trigger end

trigger start
interludeLater,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Ghost<hyphen>Paulo-interlude2
	character.setBehavior-GwenAtNight
	self.setStatus-asleep
trigger end


trigger start
interlude,0
requirements
	.null
effects
	trigger.triggerStatus-interludeCinematic-awake
	self.setStatus-asleep
trigger end

trigger start
interludeCinematic,-1
requirements
	gui.outOfDialogue
effects
	player.lockPlayer-true
	map.fadeOutMap-<dot>01
	trigger.triggerStatus-exitInterlude-awake
requirements
	self.timer-100
effects
	sound.stopSound-Track1R
	spectral.startSpectralState-Interlude-false-2400
	sound.loopSound-Track1-1
	self.setStatus-asleep
trigger end

trigger start
exitInterlude,-1
requirements
	self.timer-103
effects
	player.lockPlayer-false
	sound.fadeOutAllSounds-<dot>01
	map.fadeInMap-<dot>01
	
	trigger.triggerStatus-initiateThirdChapter-awake
	self.setStatus-asleep
trigger end














trigger start
achievementSwitch1,-1
requirements
	.null
effects
trigger end

trigger start
achievementSwitch2,-1
requirements
	.null
effects
trigger end

trigger start
achievementSwitch3,-1
requirements
	.null
effects
trigger end

trigger start
achievementSwitch4,-1
requirements
	.null
effects
trigger end

trigger start
achievementSwitch5,-1
requirements
	.null
effects
trigger end

trigger start
achievementSwitch6,-1
requirements
	trigger.triggerIsStatus-achievementSwitch1-on
	trigger.triggerIsStatus-achievementSwitch2-on
	trigger.triggerIsStatus-achievementSwitch3-on
	trigger.triggerIsStatus-achievementSwitch4-on
	trigger.triggerIsStatus-achievementSwitch5-on
effects
	trigger.triggerStatus-achievementSwitch1-asleep
	trigger.triggerStatus-achievementSwitch2-asleep
	trigger.triggerStatus-achievementSwitch3-asleep
	trigger.triggerStatus-achievementSwitch4-asleep
	trigger.triggerStatus-achievementSwitch5-asleep
	cinematic.activateAchievement-RANDOM_1
	self.setStatus-asleep
trigger end




