

// CHAPTER 4 CINEMATIC SCRIPTING

trigger start
initiateFourthChapter,-1
requirements
	self.timer-1
effects
	
	cinematic.removeProp-Paulo's Room-PaulosBed
	cinematic.addProp-Paulo's Room-BedMessy
	prop.changePropDialogue-BedMessy-Quella-PaulosMessyBedQuella-true
	
	cinematic.removeProp-Paulo's Room-PaulosDresser
	cinematic.removeProp-Gwen's Room-GwensHatchet
	cinematic.addProp-Paulo's Room-DresserMessy
	prop.changePropDialogue-DresserMessy-Quella-PaulosMessyDrawerQuella-true
	
	cinematic.removeProp-Paulo's Room-PaulosSuitcase
	cinematic.removeProp-Paulo's Room-PaulosClothes
	cinematic.addProp-Paulo's Room-SuitcaseMessy
	prop.changePropDialogue-SuitcaseMessy-Quella-PaulosMessySuitcaseQuella-true
	
	cinematic.addProp-Paulo's Room-BookMessy
	prop.changePropDialogue-BookMessy-Quella-PaulosMessyBookQuella-true
	prop.changePropDialogue-SaveProp-Quella-SavePropQuella-false
	
	character.eraseBehavior-Ferdinand
	character.eraseBehavior-Marcurio
	character.eraseBehavior-Xu
	character.eraseBehavior-Alton
	character.eraseBehavior-Gwen
	character.eraseBehavior-Darryl
	character.eraseBehavior-Quella
	character.eraseBehavior-Garv
	character.pauseCommand-Ferdinand
	character.pauseCommand-Marcurio
	character.pauseCommand-Xu
	character.pauseCommand-Alton
	character.pauseCommand-Gwen
	character.pauseCommand-Darryl
	character.pauseCommand-Quella
	character.pauseCommand-Garv
	character.stopChar-Ferdinand
	character.stopChar-Marcurio
	character.stopChar-Xu
	character.stopChar-Alton
	character.stopChar-Gwen
	character.stopChar-Darryl
	character.stopChar-Quella
	character.stopChar-Garv
	
	cinematic.moveChar-Ferdinand-Basement One-17,10
	cinematic.moveChar-Marcurio-Basement One-18,11
	cinematic.moveChar-Xu-Basement One-18,12
	cinematic.moveChar-Alton-Basement One-17,13
	cinematic.moveChar-Darryl-Basement One-14,10
	cinematic.moveChar-Quella-Basement One-13,12
	cinematic.moveChar-Garv-Basement One-14,14
	cinematic.moveChar-Cat-Garv's Room-5,7
	
	character.setBehavior-CatLocked
	character.animate-Ferdinand-Left Idle
	character.animate-Marcurio-Left Idle
	character.animate-Xu-Left Idle
	character.animate-Alton-Left Idle
	character.animate-Darryl-Right Idle
	character.animate-Quella-Right Idle
	character.animate-Garv-Right Idle
	
	character.eraseBehavior-Gwen
	character.animate-Gwen-Restrained
	character.lockChar-Gwen
	cinematic.moveChar-Gwen-Observation Room-13<dot>5,7
	
	cinematic.removeChar-Paulo
	
	dialogue.changeDialogueRoot-Ghost<hyphen>Ferdinand-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Marcurio-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Xu-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Alton-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Garv-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Quella-root3
	dialogue.changeDialogueRoot-Ghost<hyphen>Darryl-root3
	
	dialogue.changeDialogueRoot-GhostQuella<hyphen>Xu-root3
	dialogue.changeDialogueRoot-GhostAlton<hyphen>Xu-root3
	dialogue.changeDialogueRoot-GhostXu<hyphen>Marcurio-root3
	dialogue.changeDialogueRoot-GhostXu<hyphen>Ferdinand-root3
	dialogue.changeDialogueRoot-GhostDarryl<hyphen>Garv-root3
	
	dialogue.changeDialogueRoot-Gwen<hyphen>Ferdinand-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Alton-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Marcurio-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Xu-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Darryl-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Quella-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Garv-chap4
	dialogue.changeDialogueRoot-Gwen<hyphen>Cat-root2
	
	dialogue.changeDialogueRoot-Cat<hyphen>Garv-root3
	dialogue.changeDialogueRoot-Cat<hyphen>Gwen-root3
	dialogue.changeDialogueRoot-Cat<hyphen>Xu-root2
	
	dialogue.changeDialogueRoot-Ferdinand<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Marcurio<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Xu<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Darryl<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Quella<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Garv<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Cat<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Ghost<hyphen>Gwen-chap4
	
	dialogue.changeDialogueRoot-XuStealFerdinand-root2
	dialogue.changeDialogueRoot-XuStealGarv-root3
	dialogue.changeDialogueRoot-XuStealGwen-root2
	
	prop.changePermission-CaptainsDoor-Ferdinand-true
	prop.changePermission-MarcuriosDoor-Ferdinand-true
	prop.changePermission-GwensDoor-Ferdinand-true
	prop.changePermission-PaulosDoor-Ferdinand-true
	prop.changePermission-DonovansDoor-Ferdinand-true
	
	map.clearMapSound-Basement Two
	map.clearMapSound-Empty SW Room
	map.clearMapSound-Paulo's Room
	map.clearMapSound-Quella's Room
	map.clearMapSound-Donovan's Room
	map.clearMapSound-Empty NE Room
	map.clearMapSound-Bathroom
	map.clearMapSound-Basement One
	map.clearMapSound-Closet
	map.clearMapSound-Sue's Room
	map.clearMapSound-Floor One
	map.clearMapSound-Dining Room
	map.clearMapSound-Kitchen
	map.clearMapSound-Pilothouse
	map.clearMapSound-Boat
	
	map.addMapSound-Basement Two-Track9-1
	map.addMapSound-Empty SW Room-Track9-1
	map.addMapSound-Paulo's Room-Track9-1
	map.addMapSound-Quella's Room-Track9-1
	map.addMapSound-Donovan's Room-Track9-1
	map.addMapSound-Empty NE Room-Track9-1
	map.addMapSound-Bathroom-Track9-1
	map.addMapSound-Basement One-Track9-1
	map.addMapSound-Closet-Track9-1
	map.addMapSound-Sue's Room-Track9-1
	map.addMapSound-Floor One-Track9-1
	map.addMapSound-Dining Room-Track9-1
	map.addMapSound-Kitchen-Track9-1
	map.addMapSound-Pilothouse-Track9-1
	map.addMapSound-Boat-Track9-1
	
	
	cinematic.removeProp-Boat-BoatSundown
	cinematic.removeProp-Boat-BoatSundownWater
	cinematic.addParallaxProp-Boat-BoatSunset
	cinematic.removeProp-Observation Room-WindowSundown
	cinematic.addProp-Observation Room-WindowSunset
	
	trigger.triggerStatus-ChapterFourOn-awake
	trigger.triggerStatus-ChapterFourOn-on
	trigger.triggerStatus-ChapterOneOn-asleep
	trigger.triggerStatus-ChapterTwoOn-asleep
	trigger.triggerStatus-ChapterThreeOn-asleep
	
	trigger.triggerStatus-lockPaulosDoor-awake
	trigger.triggerStatus-chapter4Cinematic-awake
	trigger.triggerStatus-chap4InfiltrateDoor-awake
	self.setStatus-asleep
	
trigger end


trigger start
chapter4Cinematic,-1
requirements
	player.isInMap-Basement One
	self.timer-5
effects
	player.lockPlayer-true
	player.cameraLock-true
	sound.fadeOutAllSounds-<dot>01
	sound.fadeInSound-Track6-1-<dot>01
	player.cameraPan-5-500,350
requirements
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root
requirements
	gui.outOfDialogue
effects
	sound.fadeOutAllSounds-<dot>1
	sound.fadeInSound-Track8-1-<dot>01
requirements
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root2
requirements
	gui.outOfDialogue
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root3
requirements
	gui.outOfDialogue
	self.timer-15
effects
	gui.startDialogue-Chapter4Intro-root4
requirements
	gui.outOfDialogue
	self.timer-15
effects
	gui.startDialogue-Chapter4Intro-root5
requirements
	gui.outOfDialogue
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root6
requirements
	gui.outOfDialogue
effects
	character.unanimate-Ferdinand
	character.setBehavior-FerdinandCaptain
requirements
	self.timer-30
effects
	character.unanimate-Alton
	character.setBehavior-AltonSulking
requirements
	self.timer-45
effects
	character.unanimate-Marcurio
	character.setBehavior-MarcurioKitchen
requirements
	self.timer-60
effects
	gui.startDialogue-Chapter4Intro-root7
	character.animate-Garv-Back Idle
	character.animate-Darryl-Front Idle
	character.unanimate-Xu
	character.setBehavior-XuDiningRoom
requirements
	gui.outOfDialogue
	self.timer-15
effects
	character.unanimate-Garv
	character.setBehavior-GarvLounging
requirements
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root8
requirements
	gui.outOfDialogue
	self.timer-30
effects
	gui.startDialogue-Chapter4Intro-root9
requirements	
	gui.outOfDialogue
effects
	character.unanimate-Darryl
	character.setBehavior-DarrylOutside
requirements
	self.timer-60
effects
	character.unanimate-Quella
	character.setBehavior-QuellaChap4
requirements
	self.timer-15
effects
	player.cameraPan-3-547,581
requirements
	self.timer-80
effects

	spectral.changeMindReadThoughts-Alton-Alton4
	spectral.changeMindReadThoughts-Xu-Xu4
	spectral.changeMindReadThoughts-Marcurio-Marcurio4
	spectral.changeMindReadThoughts-Darryl-Darryl4
	spectral.changeMindReadThoughts-Quella-Quella4
	spectral.changeMindReadThoughts-Gwen-Gwen4
	spectral.changeMindReadThoughts-Garv-Garv4

	map.clearMapSound-Basement Two
	map.clearMapSound-Empty SW Room
	map.clearMapSound-Paulo's Room
	map.clearMapSound-Quella's Room
	map.clearMapSound-Darryl's Room
	map.clearMapSound-Donovan's Room
	map.clearMapSound-Empty NE Room
	map.clearMapSound-Gwen's Room
	map.clearMapSound-Bathroom
	map.clearMapSound-Basement One
	map.clearMapSound-Closet
	map.clearMapSound-Sue's Room
	map.clearMapSound-Floor One
	map.clearMapSound-Dining Room
	map.clearMapSound-Kitchen
	map.clearMapSound-Pilothouse
	map.clearMapSound-Observation Room
	map.clearMapSound-Boat
	
	map.addMapSound-Basement Two-Track8-1
	map.addMapSound-Empty SW Room-Track8-1
	map.addMapSound-Paulo's Room-Track8-1
	map.addMapSound-Quella's Room-Track14-1
	map.addMapSound-Darryl's Room-Track8-1
	map.addMapSound-Donovan's Room-Track8-1
	map.addMapSound-Empty NE Room-Track8-1
	map.addMapSound-Gwen's Room-Track8-1
	map.addMapSound-Bathroom-Track8-1
	map.addMapSound-Basement One-Track8-1
	map.addMapSound-Closet-Track8-1
	map.addMapSound-Sue's Room-Track8-1
	map.addMapSound-Floor One-Track8-1
	map.addMapSound-Dining Room-Track8-1
	map.addMapSound-Kitchen-Track8-1
	map.addMapSound-Pilothouse-Track8-1
	map.addMapSound-Observation Room-Track8-1
	map.addMapSound-Boat-Track8-1
	
	trigger.triggerStatus-chap4xuKnowledgeSkit-awake

	player.cameraLock-false
	player.lockPlayer-false
	self.setStatus-asleep
trigger end


trigger start
chap4xuKnowledgeSkit,-1

requirements
	trigger.triggerIsStatus-chap4AltonXuConfession-on
	trigger.triggerIsStatus-chap4QuellaXuConfession-on
	self.timer-30
	gui.outOfDialogue
effects
	gui.startDialogue-chap4xuKnowledge-root
	self.setStatus-asleep
trigger end

trigger start
chap4marcGwenMusic,0
requirements
	.null
effects
	sound.fadeOutAllSounds-<dot>05
	sound.loopSound-Track15-1
	trigger.triggerStatus-chap4marcGwenMusic2-awake
	self.setStatus-asleep
trigger end

trigger start
chap4marcGwenMusic2,-1
requirements
	gui.outOfDialogue
effects
	sound.fadeOutAllSounds-<dot>05
	self.setStatus-asleep
trigger end



trigger start
chap4GarvPath,-1
requirements
	player.isInMap-Floor One
effects
	character.setBehavior-MarcurioChap4
	character.setBehavior-GarvChap4
	self.setStatus-asleep
trigger end


trigger start
chap4Infiltrate,0
requirements
	.null
effects
trigger end

trigger start
chap4InfiltrateDoor,-1
requirements
	trigger.triggerIsStatus-chap4Infiltrate-on
effects
	dialogue.changeDialogueRoot-CatUnlockPaulosDoor-root2
	self.setStatus-asleep
trigger end


trigger start
chap4CatLockedAnim,-1
requirements
	player.isInMap-Garv's Room
effects
	player.lockPlayer-true
	character.drawCharGhostEffect-Cat
requirements
	self.timer-150
effects
	character.removeCharGhostEffect-Cat
	player.lockPlayer-false
	gui.startDialogue-chap6CatLocked-root-true
	self.setStatus-asleep
trigger end



trigger start
chap4XuFerdConfession,0
requirements
	.null
effects
	player.lockPlayer-true
	map.fadeOutMap-<dot>05
	
	character.eraseBehavior-Marcurio
	character.eraseBehavior-Ferdinand
	character.pauseCommand-Marcurio
	character.pauseCommand-Ferdinand
	character.stopChar-Marcurio
	character.stopChar-Ferdinand
	
	trigger.triggerStatus-chap4FinalConfessionSkit-awake
	self.setStatus-asleep
trigger end

trigger start
chap4FinalConfessionSkit,-1
requirements
	self.timer-60
effects
	map.fadeInMap-<dot>01
	
	cinematic.moveChar-Marcurio-Pilothouse-5,9
	cinematic.moveChar-Xu-Pilothouse-5,7
	cinematic.moveChar-Ferdinand-Pilothouse-7,8
	character.animate-Marcurio-Right Idle
	character.animate-Xu-Right Idle
	character.animate-Ferdinand-Left Idle
	
	gui.startDialogue-GhostXu<hyphen>Ferdinand-root3Concession2
requirements
	gui.outOfDialogue
effects
	sound.fadeOutAllSounds-<dot>01
	gui.startDialogue-GhostXu<hyphen>Ferdinand-root3ConcessionD
requirements
	gui.outOfDialogue
effects
	sound.fadeInSound-Track3-1-0<dot>01
	dialogue.changeDialogueRoot-GhostXu<hyphen>Ferdinand-root3ConcessionG
	gui.startDialogue-GhostXu<hyphen>Ferdinand-root3ConcessionG	
	self.setStatus-asleep
trigger end


trigger start
chap4FinalConfessOver,0
requirements
	.null
effects
	trigger.triggerStatus-chap4FinalConfessOver2-awake
	self.setStatus-asleep
trigger end

trigger start
chap4FinalConfessOver2,-1
requirements
	gui.outOfDialogue
effects
	player.lockPlayer-true
	map.fadeOutMap-<dot>02
	sound.fadeOutAllSounds-<dot>01
	cinematic.activateAchievement-CHAPTER_FOUR
requirements
	self.timer-100
effects
	cinematic.moveChar-Marcurio-Kitchen-6,6
	character.setBehavior-MarcurioKitchen
	character.setBehavior-FerdinandCaptain
	character.unanimate-Marcurio
	character.unanimate-Ferdinand
	character.unanimate-Xu
	character.unlockChar-Gwen
	character.unanimate-Gwen
	character.setBehavior-QuellaChap42
	character.setBehavior-GwenChap4
	character.setBehavior-XuPacingDiningRoom
	
	dialogue.changeDialogueRoot-Ghost<hyphen>Gwen-root4
	dialogue.changeDialogueRoot-Marcurio<hyphen>Gwen-root5
	
	dialogue.changeDialogueRoot-Alton<hyphen>Gwen-chap6
	dialogue.changeDialogueRoot-Ferdinand<hyphen>Gwen-chap6
	dialogue.changeDialogueRoot-Cat<hyphen>Gwen-chap4
	dialogue.changeDialogueRoot-Xu<hyphen>Gwen-chap6
	dialogue.changeDialogueRoot-Darryl<hyphen>Gwen-chap6
	dialogue.changeDialogueRoot-Quella<hyphen>Gwen-chap6
	dialogue.changeDialogueRoot-Garv<hyphen>Gwen-chap6
	
	dialogue.changeDialogueRoot-Gwen<hyphen>Ferdinand-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Alton-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Marcurio-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Xu-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Darryl-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Quella-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Garv-chap5
	dialogue.changeDialogueRoot-Gwen<hyphen>Cat-root
	dialogue.changeDialogueRoot-Cat<hyphen>Gwen-root4
	dialogue.changeDialogueRoot-GhostXu<hyphen>Marcurio-chap5
	
	map.clearMapSound-Basement Two
	map.clearMapSound-Empty SW Room
	map.clearMapSound-Donovan's Room
	map.clearMapSound-Empty NE Room
	map.clearMapSound-Bathroom
	map.clearMapSound-Basement One
	map.clearMapSound-Closet
	map.clearMapSound-Sue's Room
	map.clearMapSound-Floor One
	map.clearMapSound-Dining Room
	map.clearMapSound-Kitchen
	map.clearMapSound-Pilothouse
	map.clearMapSound-Boat
	map.clearMapSound-Observation Room
	map.clearMapSound-Darryl's Room
	
	map.addMapSound-Basement Two-Track13-1
	map.addMapSound-Empty SW Room-Track13-1
	map.addMapSound-Donovan's Room-Track13-1
	map.addMapSound-Empty NE Room-Track13-1
	map.addMapSound-Bathroom-Track13-1
	map.addMapSound-Basement One-Track13-1
	map.addMapSound-Closet-Track13-1
	map.addMapSound-Sue's Room-Track13-1
	map.addMapSound-Floor One-Track13-1
	map.addMapSound-Dining Room-Track13-1
	map.addMapSound-Kitchen-Track13-1
	map.addMapSound-Pilothouse-Track13-1
	map.addMapSound-Boat-Track13-1
	map.addMapSound-Observation Room-Track13-1
	map.addMapSound-Darryl's Room-Track13-1
	
	cinematic.removeProp-Boat-BoatSunset
	cinematic.addParallaxProp-Boat-BoatSundown
	cinematic.addStaticProp-Boat-BoatSundownWater
	cinematic.removeProp-Observation Room-WindowSunset
	cinematic.addProp-Observation Room-WindowSundown
	
	map.fadeInMap-<dot>02
	dialogue.changeDialogueRoot-GhostXu<hyphen>Ferdinand-root4
	
	player.lockPlayer-false
	self.setStatus-asleep
trigger end

trigger start
relationshipGwenMarc,0
requirements
	.null
effects
	dialogue.changeDialogueRoot-Marcurio<hyphen>Gwen-root6
	self.setStatus-asleep
trigger end


// ENDING 2 TRIGGERS ///////////////////////////////////////////////////////////
	

trigger start
ending2GwenKey,0
requirements
.null
effects
trigger end

trigger start
ending2GwenFerdinand,0
requirements
.null
effects
trigger end

trigger start
ending2GwenKiller,0
requirements
.null
effects
trigger end

trigger start
ending2GwenSuspicionPrompt,0
requirements
	trigger.triggerIsStatus-ending2GwenKey-on
	trigger.triggerIsStatus-ending2GwenFerdinand-on
	trigger.triggerIsStatus-ending2GwenKiller-on
	gui.outOfDialogue
	self.timer-30
effects
	trigger.triggerStatus-ending2GwenKey-awake
	trigger.triggerStatus-ending2GwenKey-asleep
	trigger.triggerStatus-ending2GwenFerdinand-awake
	trigger.triggerStatus-ending2GwenFerdinand-asleep
	trigger.triggerStatus-ending2GwenKiller-awake
	trigger.triggerStatus-ending2GwenKiller-asleep
	
	gui.startDialogue-chap6gwenEpiphany-root
	trigger.triggerStatus-ending2GwenSuspicion-awake
	trigger.triggerStatus-ending2GwenSuspicion-on
	self.setStatus-asleep
trigger end

trigger start
ending2GwenSuspicion,-1
requirements
.null
effects
trigger end







